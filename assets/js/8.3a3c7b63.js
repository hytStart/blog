(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{194:function(n,t,a){"use strict";a.r(t);var e=a(0),s=Object(e.a)({},function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h2",{attrs:{id:"年终活动h5动画总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#年终活动h5动画总结","aria-hidden":"true"}},[n._v("#")]),n._v(" 年终活动h5动画总结")]),n._v(" "),a("p",[n._v("戳这里"),a("a",{attrs:{href:"https://github.com/hytStart/React_chouchou",target:"_blank",rel:"noopener noreferrer"}},[n._v("----♂--github--"),a("OutboundLink")],1)]),n._v(" "),a("blockquote",[a("p",[n._v("css3 + react-id-swiper + react + redux + saga"),a("br"),n._v("\n采用postcss的Autoprefixer插件，即可满足大多数oppo，vivo手机的兼容性问题。")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/1/1/16809d17fdbe0442?w=339&h=575&f=png&s=100585",alt:""}})]),n._v(" "),a("h3",{attrs:{id:"_1-动画相关主要内容："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-动画相关主要内容：","aria-hidden":"true"}},[n._v("#")]),n._v(" 1. 动画相关主要内容：")]),n._v(" "),a("ol",[a("li",[n._v("流星")]),n._v(" "),a("li",[n._v("闪烁星星")]),n._v(" "),a("li",[n._v("字的晃动")]),n._v(" "),a("li",[n._v("人的移动（动画 + 监听动画结束时间）")]),n._v(" "),a("li",[n._v("桥的铺垫")]),n._v(" "),a("li",[n._v("开启旅程按钮缩放")]),n._v(" "),a("li",[n._v("旋转（+ 兼容）")]),n._v(" "),a("li",[n._v("react-id-swiper")]),n._v(" "),a("li",[n._v("swiper配合css3实现切换")])]),n._v(" "),a("h3",{attrs:{id:"_2-css3动画语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-css3动画语法","aria-hidden":"true"}},[n._v("#")]),n._v(" 2. css3动画语法")]),n._v(" "),a("ul",[a("li",[n._v("animation")])]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("animation-name\nanimation-duration\nanimation-timing-function  速度曲线\nanimation-delay\nanimation-iteration-count\nanimation-direction\nplay-state\t\nfill-mode  \n")])])]),a("ul",[a("li",[n._v("transform")])]),n._v(" "),a("blockquote",[a("p",[n._v("transform 属性向元素应用 2D 或 3D 转换。该属性允许我们对元素进行旋转、缩放、移动或倾斜。\n其中 transform-origin (属性改变被转换元素的中心)。")])]),n._v(" "),a("ul",[a("li",[n._v("transition")])]),n._v(" "),a("blockquote",[a("p",[n._v("三者区别：  animation  动画,关键帧，往复性。  transition  过渡, 属性，触发动作，一过性。  transform 变换, 复杂的变换参数。")])]),n._v(" "),a("h3",{attrs:{id:"_3-示例-https-github-com-hytstart-react-chouchou-blob-master-src-components-home-ui-action-action-scss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-示例-https-github-com-hytstart-react-chouchou-blob-master-src-components-home-ui-action-action-scss","aria-hidden":"true"}},[n._v("#")]),n._v(" 3. 示例 https://github.com/hytStart/React_chouchou/blob/master/src/components/home/ui/action/action.scss")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/1/1/16809a989e503c84?w=1145&h=543&f=png&s=50792",alt:""}})]),n._v(" "),a("ul",[a("li",[n._v("流星")])]),n._v(" "),a("blockquote",[a("p",[n._v("改变位置"),a("code",[n._v("translate3d")]),n._v(",透明度"),a("code",[n._v("opacity")]),n._v("和大小"),a("code",[n._v("scale")]),n._v("。"),a("br"),n._v("\n流星尾巴采用伪元素元素"),a("code",[n._v(":after")]),n._v("旋转"),a("code",[n._v("-45deg")]),n._v("(旋转基点为左"),a("code",[n._v("transform-origin: left;")]),n._v(")；采用"),a("code",[n._v("border")]),n._v("可以实现，靠近头部越亮，靠近尾部越暗。")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/1/1/16809aa3a02a052d?w=264&h=297&f=png&s=5776",alt:"图一 流星"}})]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v(".star {\n    display: block;\n    width: 5px;\n    height: 5px;\n    border-radius: 50%;\n    background: #FFF;\n    top: 10px;\n    left: 200px;\n    position: relative;\n    animation: star-ani 6s infinite ease-out;\n    box-shadow: 0 0 5px 5px rgba(255, 255, 255, .3);\n    opacity: 1;\n}\n.star:after {\n    content: '';\n    display: block;\n    top: 0px;\n    left: 40%;\n    border: 0px solid #fff;\n    border-width: 0px 90px 2px 90px;\n    border-color: transparent transparent transparent rgba(255, 255, 255, .3);\n    transform: rotate(-45deg) translate3d(1px, 3px, 0);\n    box-shadow: 0 0 1px 0 rgba(255, 255, 255, .1);\n    transform-origin: left;\n}\n\n@keyframes star-ani {\n    0% {\n        opacity: 0;\n        transform: scale(0) rotate(0) translate3d(0, 0, 0);\n    }\n    50% {\n        opacity: 1;\n        transform: scale(1) rotate(0) translate3d(-100px, 100px, 0);\n    }\n    100% {\n        opacity: 0;\n        transform: scale(1) rotate(0) translate3d(-200px, 200px, 0);\n    }\n}\n")])])]),a("ul",[a("li",[n._v("闪烁星星")])]),n._v(" "),a("blockquote",[a("p",[n._v("改变透明度")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/1/1/16809ad21ecdf2be?w=260&h=297&f=png&s=5815",alt:""}})]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v(".shine {\n    background: url('../../../../images/action/icon-star1.png') no-repeat center;\n    background-size: 100%;\n    width: 30px;\n    height: 40px;\n    position: absolute;\n    top: 90px;\n    left: 100px;\n    opacity: 0;\n    animation: opacity-change 0.5s ease-in-out infinite;\n}\n\n@keyframes opacity-change {\n    0% {\n        opacity: 0;\n    }\n    50% {\n        opacity: 1;\n    }\n    100% {\n        opacity: 0;\n    }\n}\n")])])]),a("ul",[a("li",[n._v("字")])]),n._v(" "),a("blockquote",[a("p",[n._v("分为两段动画，下降和上升。"),a("code",[n._v("translateY")]),n._v("改变即可。")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/1/1/16809b1fdfc80093?w=265&h=297&f=png&s=5849",alt:""}})]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v(".text-item-0 {\n    position: absolute;\n    width: 25px;\n    height: 75px;\n    top: 60px;\n    left: 100px;\n    background: url('../../../../images/action/S-start.png') no-repeat center;\n    background-size: 100%;\n    animation: letter-0 1.5s ease-in-out both, letter-0-1 2.0s ease-in-out 1.5s both;\n}\n\n@keyframes letter-0 {\n    0% {\n        transform: translateY(0)\n    }\n    50% {\n        transform: translateY(80px)\n    }\n    100% {\n        transform: translateY(0px)\n    }\n}\n@keyframes letter-0-1 {\n    0% {\n        opacity: 1;\n    }\n    100% {\n        top: -80px;\n        opacity: 0;\n    }\n}\n")])])]),a("ul",[a("li",[n._v("人移动")])]),n._v(" "),a("blockquote",[a("p",[n._v("切换dom，添加类控制移动和暂停，以及切换背景人物。监听"),a("code",[n._v("animationend")]),n._v("事件。")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/1/1/16809b147f8f40dd?w=296&h=302&f=png&s=5570",alt:""}})]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("jsx\n{\n    peopleMove ?\n        <div\n            className={`${style.people_move} ${!pausedState && style.people_paused}`}\n            ref={start2 => { this.start2 = start2 }}\n        />\n        :\n        <div className={style.people} />\n}\ncss\n.people {\n    width: 20px;\n    height: 64px;\n    position: absolute;\n    left: 10px;\n    top: 130px;\n    background: url('../../../../images/action/people.png') no-repeat center;\n    background-size: 100%; \n    opacity: 0;\n    animation: peopleUp 1s ease-in-out 0.5s both;\n}\n.people_move {\n    background: url('../../../../images/action/people_moveleft.gif');\n    background-size: 100% 100%;\n    background-position: center;\n    background-repeat: no-repeat;\n    width: 20px;\n    height: 64px;\n    position: absolute;\n    left: 10px;\n    top: 130px;\n    opacity: 1;\n    animation: PeopleMove 1.5s linear 0s both;\n}\n.people_paused {\n    width: 20px;\n    height: 64px;\n    background: url('../../../../images/action/people.png');\n    background-size: 100% 100%;\n    background-position: center;\n    background-repeat: no-repeat;\n    animation-play-state: paused;\n}\n\n@keyframes peopleUp {\n    0% {\n        opacity: 0;\n    }\n    100% {\n        opacity: 1;\n    }\n}\n@keyframes PeopleMove {\n    0% {\n        left: 10px;\n        top: 130px;\n    }\n    100% {\n        top: 20px;\n        left: 180px;\n        background-size: 100% 100%;\n        background-position: center;\n        background-repeat: no-repeat;\n    }\n}\n\n// 监听动画结束时机\ncomponentDidUpdate() {\n    const { peopleMove } = this.state\n    if (peopleMove) {\n        this.start2.addEventListener('animationend', this.end)\n        this.start2.addEventListener('webkitAnimationEnd', this.end)\n        this.start2.addEventListener('mozAnimationEnd', this.end)\n        this.start2.addEventListener('oAnimationEnd', this.end)\n    }\n}\n")])])]),a("ul",[a("li",[n._v("桥的出现")])]),n._v(" "),a("blockquote",[a("p",[n._v("配合"),a("code",[n._v("background-size: cover;")]),n._v("属性实现。")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/1/1/16809b6b6d34edb8?w=264&h=294&f=png&s=8279",alt:""}})]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v(".brige {\n    width: 0px;\n    background: url('../../../../images/action/bridge.png');\n    background-size: cover;\n    background-repeat: no-repeat;\n    height: 100px;\n    position: absolute;\n    top: 40px;\n    left: 30px;\n    animation: BridgeFadeIn 3s linear both;\n    opacity: 0;\n}\n\n@keyframes BridgeFadeIn {\n    0% {\n        width: 0px;\n        opacity: 0;\n    }\n    100% {\n        width: 200px;\n        opacity: 1;\n    }\n}\n")])])]),a("ul",[a("li",[n._v("渐变大（开始旅程）")])]),n._v(" "),a("blockquote",[a("p",[n._v("利用"),a("code",[n._v("transform scale")]),n._v("2D 缩放转换。")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/1/1/16809b8db89c071b?w=262&h=297&f=png&s=5793",alt:""}})]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v(".icon-ciecle {\n    display: block;\n    position: absolute;\n    left: 100px;\n    top: 80px;\n    width: 30px;\n    height: 30px;\n    background: url('../../../../images/action/icon-light.png') no-repeat center;\n    background-size: 100%; \n    animation: warn 1.2s ease-in-out 0s infinite both;\n}\n\n@keyframes warn {\n    0% {\n        transform: scale(0.1);\n        opacity: 0.0;\n    }\n    25% {\n        transform: scale(0.2);\n        opacity: 0.3;\n    }\n    50% {\n        transform: scale(0.4);\n        opacity: 0.5;\n    }\n    75% {\n        transform: scale(0.6);\n        opacity: 0.7;\n    }\n    100% {\n        transform: scale(0.8);\n        opacity: 0.0;\n    }\n}\n")])])]),a("ul",[a("li",[n._v("旋转")])]),n._v(" "),a("blockquote",[a("p",[n._v("ios的"),a("code",[n._v("animation-play-state: paused;")]),n._v("不起作用，且"),a("code",[n._v("animation")]),n._v("动画不可写在新增类里，必须写在一个类里。（测试中发现，这里有疑问。）")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/1/1/16809bc02e9c79c5?w=264&h=297&f=png&s=6607",alt:""}})]),n._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/1/1/16809bc61ead0636?w=263&h=298&f=png&s=7018",alt:""}})]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v(".music_img {\n    width: 40px;\n    height: 40px;\n    display: block;\n    position: absolute;\n    left: 100px;\n    top: 80px;\n    animation: rotating 3s linear infinite;\n    animation-play-state: running;\n}\n.rotate-pause {\n    animation-play-state: paused;\n}\n\n@keyframes rotating {\n    0% {\n    \ttransform: rotate(0deg);\n     }\n    100% { \n\ttransform: rotate(360deg);\n     }\n}\n")])])]),a("ul",[a("li",[n._v("react-id-swiper")])]),n._v(" "),a("blockquote",[a("p",[n._v("Swiper的react版本，基本api都支持，具实验目测相当于Swiper v4。")]),n._v(" "),a("ol",[a("li",[n._v("不一定通过api。也可以通过重写css实现。")]),n._v(" "),a("li",[n._v("重写css切换效果的话，会影响它本身的动画效果，所以可通过添加不可滑动来控制。")])])]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("1. \n.swiper-wrapper {\n    transition-delay: 1.6s;\n}\n2. \nnoSwiping: true,\nnoSwipingClass: 'stop-swiping',\n")])])]),a("ul",[a("li",[n._v("Swiper实现的迷宫切换")])]),n._v(" "),a("blockquote",[a("p",[n._v("1.swiper的"),a("code",[n._v("effect")]),n._v("属性与控制背景图片的"),a("code",[n._v("opacity")]),n._v("，利用时间差实现最终效果。包括迷宫的切换，背包男的出现与消失，弹窗的出现与消失。"),a("br"),n._v("\n2.swiper属性的"),a("code",[n._v("activeIndex")]),n._v("，可以得到滑动到第几页，通过改变"),a("code",[n._v("dom")]),n._v("或者改变类，控制第几页动画的发生。")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/1/2/1680d67b8a2e6879?w=1440&h=1080&f=png&s=1015037",alt:""}})]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("// 根据activeIndex拿到的页数，控制该页数state的改变，通过切换dom和添加类的方式，达到进场与退场的动画效果。\n// 添加类stop-swiping控制不可滑动，动画完成后，才可继续滑动下一页。\nconst mazeStyle = classNames({\n    [styles['maze-1']]: true,\n    [styles['maze-out']]: firstMazeOut,\n})\nconst peopleStyle = classNames({\n    [styles['people-1']]: true,\n    [styles['people-out']]: firstMazeOut,\n})\nconst popCardStyle = classNames({\n    [styles['pop-card-container']]: true,\n    [styles['pop-card-out']]: firstMazeOut,\n})\n{\n    firstMazeIn ?\n        <div className={!isSlideFirst && \"stop-swiping\"}>\n            <div className={styles['maze-container']}>\n                <div className={mazeStyle} />\n                <div className={peopleStyle} />\n            </div>\n            <div className={popCardStyle}>\n                <ModalScene {...this.props} />\n            </div>\n        </div>\n        :\n        <div />    // 不添加会影响swiper自身页数的判断\n}\n")])])]),a("h3",{attrs:{id:"_4-动画总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-动画总结","aria-hidden":"true"}},[n._v("#")]),n._v(" 4. 动画总结")]),n._v(" "),a("blockquote",[a("p",[n._v("别人写的真牛X,自己只会"),a("code",[n._v("opacity")]),n._v(","),a("code",[n._v("translate")]),n._v("。")])]),n._v(" "),a("h3",{attrs:{id:"_5-待完善"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-待完善","aria-hidden":"true"}},[n._v("#")]),n._v(" 5. 待完善")]),n._v(" "),a("ul",[a("li",[n._v("html2canvas")]),n._v(" "),a("li",[n._v("资源加载")]),n._v(" "),a("li",[n._v("jsbridge使用与注意事项")])])])},[],!1,null,null,null);t.default=s.exports}}]);